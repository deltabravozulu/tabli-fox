!function(e){function t(t){for(var r,c,l=t[0],u=t[1],i=t[2],f=0,b=[];f<l.length;f++)c=l[f],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&b.push(a[c][0]),a[c]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(s&&s(t);b.length;)b.shift()();return o.push.apply(o,i||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,l=1;l<n.length;l++){var u=n[l];0!==a[u]&&(r=!1)}r&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},a={3:0},o=[];function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var l=window.webpackJsonp=window.webpackJsonp||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var i=0;i<l.length;i++)t(l[i]);var s=u;o.push([284,0]),n()}({284:function(e,t,n){e.exports=n(312)},312:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(0),c=n(23),l=n(3),u=n(5),i=n(21),s=n(9),f=n(2),b=n(14),m=n(34),p=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)c.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return c},d=Object(f.a)({width:120,marginLeft:5}),v=Object(f.a)({width:120,marginLeft:5}),h=Object(f.a)({marginTop:0,marginBottom:0,marginLeft:0,marginRight:4}),g=Object(f.a)({marginTop:0,marginBottom:0,marginLeft:0,marginRight:0}),y=Object(f.a)({marginLeft:8,marginRight:4,marginTop:"auto",marginBottom:"auto"}),O=Object(f.a)({display:"flex",alignContent:"flex-start"}),w=function(e){var t=e.initialPrefs,n=e.onClose,r=e.onApply,c=e.onSubmit;a.a.debug("PreferencesModal: initialPrefs: ",t.toJS());var w=p(Object(o.useState)(t),2),E=w[0],x=w[1],S=function(e){e.keyCode===u.g?(e.preventDefault(),n()):e.keyCode===u.f&&k(e)},k=function(e){e.preventDefault(),c(E)},N=E.popoutOnStart,j=E.dedupeTabs,C=E.revertOnOpen,P=E.theme,T=Object.keys(s.b).map((function(e){return o.createElement("option",{key:e,value:e},e)})),A=o.createElement("select",{className:d,name:"theme",value:P,onChange:function(e){return function(e){var t=E.set("theme",e.target.value);a.a.debug("handleThemeChange: nextPrefs:",t.toJS()),x(t)}(e)}},T),B=E.layout,D=Object.keys(b.b).map((function(e){return o.createElement("option",{key:e,value:e},e)})),J=o.createElement("select",{className:d,name:"layout",value:B,onChange:function(e){return function(e){var t=E.set("layout",e.target.value);a.a.debug("handleThemeChange: nextPrefs:",t.toJS()),x(t)}(e)}},D),L=Object(m.a)(E.fontScaleFactor),_=m.c.map((function(e){return o.createElement("option",{key:e.toString(),value:e},e.toString())})),z=o.createElement("select",{className:v,name:"fontSize",value:L,onChange:function(e){return function(e){var t=E,n=Object(m.b)(Number.parseInt(e.target.value)),r=t.set("fontScaleFactor",n);a.a.debug("handleFontSizeChange: fontSize: ",e.target.value,", nextPrefs:",r.toJS()),x(r)}(e)}},_),I=l.B;return o.createElement(i.b,{className:l.x,title:"Tabli Preferences",onClose:n},o.createElement(i.a,null,o.createElement("div",{className:l.t},o.createElement("form",{className:l.y,onSubmit:k},o.createElement("div",{className:l.z},o.createElement("div",{className:Object(f.b)("checkbox",I,O)},o.createElement("input",{type:"checkbox",className:y,checked:N,onChange:function(e){return n=(t=E).set("popoutOnStart",!t.popoutOnStart),void x(n);var t,n}}),o.createElement("label",{className:g},"Show Tabli popout window at startup")),o.createElement("div",{className:Object(f.b)("checkbox",I,O)},o.createElement("input",{type:"checkbox",className:y,checked:j,onChange:function(e){return n=(t=E).set("dedupeTabs",!t.dedupeTabs),void x(n);var t,n}}),o.createElement("label",{className:g},"Automatically close duplicate tabs")),o.createElement("div",{className:Object(f.b)("checkbox",I,O)},o.createElement("input",{type:"checkbox",className:y,checked:C,onChange:function(e){return n=(t=E).set("revertOnOpen",!t.revertOnOpen),void x(n);var t,n}}),o.createElement("label",{className:g},"Only re-open saved tabs when re-opening saved windows")),o.createElement("div",null),o.createElement("div",null),o.createElement("div",{className:l.A},o.createElement("label",{className:h},"Theme")),A,o.createElement("div",{className:l.A},o.createElement("label",{className:h},"Layout")),J,o.createElement("div",{className:l.A},o.createElement("label",{className:h},"Font Size")),z)),o.createElement("hr",null),o.createElement("div",{className:l.g},o.createElement("button",{type:"button",className:"btn btn-default btn-light tabli-dialog-button",onClick:function(e){!function(e){e.preventDefault(),r(t)}(e),n()},tabIndex:0},"Cancel"),o.createElement("button",{type:"button",className:"btn btn-info tabli-dialog-button",onClick:function(e){return function(e){e.preventDefault(),r(E)}(e)},tabIndex:0,onKeyDown:S},"Apply"),o.createElement("button",{type:"button",className:"btn btn-primary btn-default tabli-dialog-button",onClick:function(e){return k(e)},tabIndex:0,onKeyDown:S},"OK")))))},E=n(6),x=n(17),S=n.n(x),k=n(4),N=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function c(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,l)}u((r=r.apply(e,t||[])).next())}))},j=function(e,t){var n,r,a,o,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,r=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(!(a=c.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){c=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){c.label=o[1];break}if(6===o[0]&&c.label<a[1]){c.label=a[1],a=o;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(o);break}a[2]&&c.ops.pop(),c.trys.pop();continue}o=t.call(e,c)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},C=S.a,P=function(){return N(void 0,void 0,void 0,(function(){var e;return j(this,(function(t){switch(t.label){case 0:return a.a.debug("onClose"),[4,C.tabs.getCurrent()];case 1:return e=t.sent(),a.a.debug("onClose tab: ",e),e.id&&chrome.tabs.remove([e.id]),[2]}}))}))},T=function(e,t){return N(void 0,void 0,void 0,(function(){return j(this,(function(n){switch(n.label){case 0:return[4,E.n(t,e)];case 1:return n.sent(),[2]}}))}))},A=function(){return N(void 0,void 0,void 0,(function(){var e,t,n,r,l;return j(this,(function(u){try{e=chrome.extension.getBackgroundPage(),t=e.stateRef,n=Object(k.mutableGet)(t),r=document.getElementById("prefsContent"),l=o.createElement(w,{onClose:P,initialPrefs:n.preferences,onApply:function(e){return T(t,e)},onSubmit:function(e){return n=t,r=e,N(void 0,void 0,void 0,(function(){return j(this,(function(e){switch(e.label){case 0:return[4,T(n,r)];case 1:return e.sent(),[4,P()];case 2:return e.sent(),[2]}}))}));var n,r}}),c.render(l,r)}catch(e){throw a.a.error("caught exception rendering preferences page:"),a.a.error(e.stack),e}return[2]}))}))};window.onload=function(){return A()}}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RzL2NvbXBvbmVudHMvUHJlZmVyZW5jZXNNb2RhbC50c3giLCJ3ZWJwYWNrOi8vLy4vc3JjL3RzL3ByZWZzUGFnZS50c3giXSwibmFtZXMiOlsid2VicGFja0pzb25wQ2FsbGJhY2siLCJkYXRhIiwibW9kdWxlSWQiLCJjaHVua0lkIiwiY2h1bmtJZHMiLCJtb3JlTW9kdWxlcyIsImV4ZWN1dGVNb2R1bGVzIiwiaSIsInJlc29sdmVzIiwibGVuZ3RoIiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiaW5zdGFsbGVkQ2h1bmtzIiwicHVzaCIsIm1vZHVsZXMiLCJwYXJlbnRKc29ucEZ1bmN0aW9uIiwic2hpZnQiLCJkZWZlcnJlZE1vZHVsZXMiLCJhcHBseSIsImNoZWNrRGVmZXJyZWRNb2R1bGVzIiwicmVzdWx0IiwiZGVmZXJyZWRNb2R1bGUiLCJmdWxmaWxsZWQiLCJqIiwiZGVwSWQiLCJzcGxpY2UiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwicyIsImluc3RhbGxlZE1vZHVsZXMiLCIzIiwiZXhwb3J0cyIsIm1vZHVsZSIsImwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicCIsImpzb25wQXJyYXkiLCJ3aW5kb3ciLCJvbGRKc29ucEZ1bmN0aW9uIiwic2xpY2UiLCJ0aGVtZVNlbGVjdFN0eWxlIiwid2lkdGgiLCJtYXJnaW5MZWZ0IiwiZm9udFNpemVTZWxlY3RTdHlsZSIsInNlbGVjdExhYmVsU3R5bGUiLCJtYXJnaW5Ub3AiLCJtYXJnaW5Cb3R0b20iLCJtYXJnaW5SaWdodCIsImNoZWNrTGFiZWxTdHlsZSIsInByZWZzQ2hlY2tib3giLCJwcmVmc0xhYmVsZWRDaGVja2JveCIsImRpc3BsYXkiLCJhbGlnbkNvbnRlbnQiLCJpbml0aWFsUHJlZnMiLCJvbkNsb3NlIiwib25BcHBseSIsIm9uU3VibWl0IiwiZGVidWciLCJ0b0pTIiwicHJlZnMiLCJzZXRQcmVmcyIsImhhbmRsZUtleURvd24iLCJlIiwia2V5Q29kZSIsInByZXZlbnREZWZhdWx0IiwiaGFuZGxlU3VibWl0IiwicG9wU3RhcnQiLCJwb3BvdXRPblN0YXJ0IiwiZGVkdXBlVGFicyIsInJldmVydE9uT3BlbiIsImN1cnJlbnRUaGVtZSIsInRoZW1lIiwidGhlbWVPcHRzIiwia2V5cyIsIm1hcCIsIm5tIiwidGhlbWVTZWxlY3QiLCJjbGFzc05hbWUiLCJvbkNoYW5nZSIsIm5leHRQcmVmcyIsInNldCIsInRhcmdldCIsImhhbmRsZVRoZW1lQ2hhbmdlIiwiY3VycmVudExheW91dCIsImxheW91dCIsImxheW91dE9wdHMiLCJsYXlvdXRTZWxlY3QiLCJoYW5kbGVMYXlvdXRDaGFuZ2UiLCJjdXJyZW50Rm9udFNpemUiLCJmb250U2NhbGVGYWN0b3IiLCJmb250U2l6ZU9wdHMiLCJzeiIsInRvU3RyaW5nIiwiZm9udFNpemVTZWxlY3QiLCJvbGRQcmVmcyIsIm5leHRTY2FsZUZhY3RvciIsIk51bWJlciIsInBhcnNlSW50IiwiaGFuZGxlRm9udFNpemVDaGFuZ2UiLCJyaWdodENvbCIsIk1vZGFsIiwidGl0bGUiLCJ0eXBlIiwiY2hlY2tlZCIsIm9uQ2xpY2siLCJoYW5kbGVDYW5jZWwiLCJ0YWJJbmRleCIsImhhbmRsZUFwcGx5Iiwib25LZXlEb3duIiwiY2hyb21lcCIsInRhYnMiLCJnZXRDdXJyZW50IiwidGFiIiwiaWQiLCJjaHJvbWUiLCJyZW1vdmUiLCJvbkFwcGx5UHJlZmVyZW5jZXMiLCJzdGF0ZVJlZiIsIm5ld1ByZWZzIiwiYWN0aW9ucyIsInJlbmRlclByZWZzIiwiYmdQYWdlIiwiZXh0ZW5zaW9uIiwiZ2V0QmFja2dyb3VuZFBhZ2UiLCJzdCIsInBhcmVudE5vZGUiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwibW9kYWwiLCJwcmVmZXJlbmNlcyIsImVycm9yIiwic3RhY2siLCJvbmxvYWQiXSwibWFwcGluZ3MiOiJhQUNFLFNBQVNBLEVBQXFCQyxHQVE3QixJQVBBLElBTUlDLEVBQVVDLEVBTlZDLEVBQVdILEVBQUssR0FDaEJJLEVBQWNKLEVBQUssR0FDbkJLLEVBQWlCTCxFQUFLLEdBSUhNLEVBQUksRUFBR0MsRUFBVyxHQUNwQ0QsRUFBSUgsRUFBU0ssT0FBUUYsSUFDekJKLEVBQVVDLEVBQVNHLEdBQ2hCRyxPQUFPQyxVQUFVQyxlQUFlQyxLQUFLQyxFQUFpQlgsSUFBWVcsRUFBZ0JYLElBQ3BGSyxFQUFTTyxLQUFLRCxFQUFnQlgsR0FBUyxJQUV4Q1csRUFBZ0JYLEdBQVcsRUFFNUIsSUFBSUQsS0FBWUcsRUFDWkssT0FBT0MsVUFBVUMsZUFBZUMsS0FBS1IsRUFBYUgsS0FDcERjLEVBQVFkLEdBQVlHLEVBQVlILElBS2xDLElBRkdlLEdBQXFCQSxFQUFvQmhCLEdBRXRDTyxFQUFTQyxRQUNkRCxFQUFTVSxPQUFUVixHQU9ELE9BSEFXLEVBQWdCSixLQUFLSyxNQUFNRCxFQUFpQmIsR0FBa0IsSUFHdkRlLElBRVIsU0FBU0EsSUFFUixJQURBLElBQUlDLEVBQ0lmLEVBQUksRUFBR0EsRUFBSVksRUFBZ0JWLE9BQVFGLElBQUssQ0FHL0MsSUFGQSxJQUFJZ0IsRUFBaUJKLEVBQWdCWixHQUNqQ2lCLEdBQVksRUFDUkMsRUFBSSxFQUFHQSxFQUFJRixFQUFlZCxPQUFRZ0IsSUFBSyxDQUM5QyxJQUFJQyxFQUFRSCxFQUFlRSxHQUNHLElBQTNCWCxFQUFnQlksS0FBY0YsR0FBWSxHQUUzQ0EsSUFDRkwsRUFBZ0JRLE9BQU9wQixJQUFLLEdBQzVCZSxFQUFTTSxFQUFvQkEsRUFBb0JDLEVBQUlOLEVBQWUsS0FJdEUsT0FBT0QsRUFJUixJQUFJUSxFQUFtQixHQUtu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Z0QsRUFBVSxJQUVWLEVBQVUscUQsd0RBRUEsT0FEWixJQUFJcEQsTUFBTSxXQUNFLEdBQU1vRCxFQUFRQyxLQUFLQyxjLGNBQXpCQyxFQUFNLFNBQ1osSUFBSXZELE1BQU0sZ0JBQWlCdUQsR0FDdkJBLEVBQUlDLElBQ0pDLE9BQU9KLEtBQUtLLE9BQU8sQ0FBQ0gsRUFBSUMsSyxZQUkxQkcsRUFBcUIsU0FDdkJDLEVBQ0FDLEdBQXFCLDBDLGtEQUVyQixTQUFNQyxFQUFBLEVBQXdCRCxFQUFVRCxJLGNBQXhDLFMsWUFXRUcsRUFBYyxxRCx5Q0FDaEIsSUFDVUMsRUFBU1AsT0FBT1EsVUFBVUMsb0JBQzFCLEVBQVlGLEVBQWVKLFNBQzNCTyxFQUFLLHFCQUFXLEdBQ2hCQyxFQUFhQyxTQUFTQyxlQUFlLGdCQUNyQ0MsRUFDRixnQkFBQyxFQUFnQixDQUNiMUUsUUFBUyxFQUNURCxhQUFjdUUsRUFBR0ssWUFDakIxRSxRQUFTLFNBQUFJLEdBQVMsT0FBQXlELEVBQW1CLEVBQVV6RCxJQUMvQ0gsU0FBVSxTQUFBRyxHQUFTLE9BbEIvQjBELEVBa0JtRCxFQWpCbkRDLEVBaUI2RDNELEVBakJ4QyxtQyxrREFFckIsU0FBTXlELEVBQW1CQyxFQUFVQyxJLE9BQ25DLE9BREEsU0FDQSxHQUFNLEssY0FBTixTLFdBTHdCLElBQ3hCRCxFQUNBQyxLQW9CSSxTQUFnQlUsRUFBT0gsR0FDekIsTUFBTy9ELEdBR0wsTUFGQSxJQUFJb0UsTUFBTSxnREFDVixJQUFJQSxNQUFNcEUsRUFBRXFFLE9BQ05yRSxFLGlCQUtWekIsT0FBTytGLE9BQVMsV0FBTSxPQUFBWiIsImZpbGUiOiJwcmVmc1BhZ2UuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gaW5zdGFsbCBhIEpTT05QIGNhbGxiYWNrIGZvciBjaHVuayBsb2FkaW5nXG4gXHRmdW5jdGlvbiB3ZWJwYWNrSnNvbnBDYWxsYmFjayhkYXRhKSB7XG4gXHRcdHZhciBjaHVua0lkcyA9IGRhdGFbMF07XG4gXHRcdHZhciBtb3JlTW9kdWxlcyA9IGRhdGFbMV07XG4gXHRcdHZhciBleGVjdXRlTW9kdWxlcyA9IGRhdGFbMl07XG5cbiBcdFx0Ly8gYWRkIFwibW9yZU1vZHVsZXNcIiB0byB0aGUgbW9kdWxlcyBvYmplY3QsXG4gXHRcdC8vIHRoZW4gZmxhZyBhbGwgXCJjaHVua0lkc1wiIGFzIGxvYWRlZCBhbmQgZmlyZSBjYWxsYmFja1xuIFx0XHR2YXIgbW9kdWxlSWQsIGNodW5rSWQsIGkgPSAwLCByZXNvbHZlcyA9IFtdO1xuIFx0XHRmb3IoO2kgPCBjaHVua0lkcy5sZW5ndGg7IGkrKykge1xuIFx0XHRcdGNodW5rSWQgPSBjaHVua0lkc1tpXTtcbiBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaW5zdGFsbGVkQ2h1bmtzLCBjaHVua0lkKSAmJiBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pIHtcbiBcdFx0XHRcdHJlc29sdmVzLnB1c2goaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdWzBdKTtcbiBcdFx0XHR9XG4gXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gMDtcbiBcdFx0fVxuIFx0XHRmb3IobW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcbiBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9yZU1vZHVsZXMsIG1vZHVsZUlkKSkge1xuIFx0XHRcdFx0bW9kdWxlc1ttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG4gXHRcdFx0fVxuIFx0XHR9XG4gXHRcdGlmKHBhcmVudEpzb25wRnVuY3Rpb24pIHBhcmVudEpzb25wRnVuY3Rpb24oZGF0YSk7XG5cbiBcdFx0d2hpbGUocmVzb2x2ZXMubGVuZ3RoKSB7XG4gXHRcdFx0cmVzb2x2ZXMuc2hpZnQoKSgpO1xuIFx0XHR9XG5cbiBcdFx0Ly8gYWRkIGVudHJ5IG1vZHVsZXMgZnJvbSBsb2FkZWQgY2h1bmsgdG8gZGVmZXJyZWQgbGlzdFxuIFx0XHRkZWZlcnJlZE1vZHVsZXMucHVzaC5hcHBseShkZWZlcnJlZE1vZHVsZXMsIGV4ZWN1dGVNb2R1bGVzIHx8IFtdKTtcblxuIFx0XHQvLyBydW4gZGVmZXJyZWQgbW9kdWxlcyB3aGVuIGFsbCBjaHVua3MgcmVhZHlcbiBcdFx0cmV0dXJuIGNoZWNrRGVmZXJyZWRNb2R1bGVzKCk7XG4gXHR9O1xuIFx0ZnVuY3Rpb24gY2hlY2tEZWZlcnJlZE1vZHVsZXMoKSB7XG4gXHRcdHZhciByZXN1bHQ7XG4gXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBkZWZlcnJlZE1vZHVsZXMubGVuZ3RoOyBpKyspIHtcbiBcdFx0XHR2YXIgZGVmZXJyZWRNb2R1bGUgPSBkZWZlcnJlZE1vZHVsZXNbaV07XG4gXHRcdFx0dmFyIGZ1bGZpbGxlZCA9IHRydWU7XG4gXHRcdFx0Zm9yKHZhciBqID0gMTsgaiA8IGRlZmVycmVkTW9kdWxlLmxlbmd0aDsgaisrKSB7XG4gXHRcdFx0XHR2YXIgZGVwSWQgPSBkZWZlcnJlZE1vZHVsZVtqXTtcbiBcdFx0XHRcdGlmKGluc3RhbGxlZENodW5rc1tkZXBJZF0gIT09IDApIGZ1bGZpbGxlZCA9IGZhbHNlO1xuIFx0XHRcdH1cbiBcdFx0XHRpZihmdWxmaWxsZWQpIHtcbiBcdFx0XHRcdGRlZmVycmVkTW9kdWxlcy5zcGxpY2UoaS0tLCAxKTtcbiBcdFx0XHRcdHJlc3VsdCA9IF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gZGVmZXJyZWRNb2R1bGVbMF0pO1xuIFx0XHRcdH1cbiBcdFx0fVxuXG4gXHRcdHJldHVybiByZXN1bHQ7XG4gXHR9XG5cbiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4gXHQvLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbiBcdC8vIFByb21pc2UgPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG4gXHR2YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuIFx0XHQzOiAwXG4gXHR9O1xuXG4gXHR2YXIgZGVmZXJyZWRNb2R1bGVzID0gW107XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdHZhciBqc29ucEFycmF5ID0gd2luZG93W1wid2VicGFja0pzb25wXCJdID0gd2luZG93W1wid2VicGFja0pzb25wXCJdIHx8IFtdO1xuIFx0dmFyIG9sZEpzb25wRnVuY3Rpb24gPSBqc29ucEFycmF5LnB1c2guYmluZChqc29ucEFycmF5KTtcbiBcdGpzb25wQXJyYXkucHVzaCA9IHdlYnBhY2tKc29ucENhbGxiYWNrO1xuIFx0anNvbnBBcnJheSA9IGpzb25wQXJyYXkuc2xpY2UoKTtcbiBcdGZvcih2YXIgaSA9IDA7IGkgPCBqc29ucEFycmF5Lmxlbmd0aDsgaSsrKSB3ZWJwYWNrSnNvbnBDYWxsYmFjayhqc29ucEFycmF5W2ldKTtcbiBcdHZhciBwYXJlbnRKc29ucEZ1bmN0aW9uID0gb2xkSnNvbnBGdW5jdGlvbjtcblxuXG4gXHQvLyBhZGQgZW50cnkgbW9kdWxlIHRvIGRlZmVycmVkIGxpc3RcbiBcdGRlZmVycmVkTW9kdWxlcy5wdXNoKFsyODQsMF0pO1xuIFx0Ly8gcnVuIGRlZmVycmVkIG1vZHVsZXMgd2hlbiByZWFkeVxuIFx0cmV0dXJuIGNoZWNrRGVmZXJyZWRNb2R1bGVzKCk7XG4iLCJpbXBvcnQgbG9nIGZyb20gJ2xvZ2xldmVsJzsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0ICogYXMgc3R5bGVzIGZyb20gJy4vY3NzU3R5bGVzJztcbmltcG9ydCAqIGFzIENvbnN0YW50cyBmcm9tICcuL2NvbnN0YW50cyc7XG5pbXBvcnQgKiBhcyBNb2RhbCBmcm9tICcuL01vZGFsJztcbmltcG9ydCB7IHRoZW1lcyB9IGZyb20gJy4vdGhlbWVDb250ZXh0JztcbmltcG9ydCB7IGNzcywgY3ggfSBmcm9tICdlbW90aW9uJztcbmltcG9ydCB7IFByZWZlcmVuY2VzIH0gZnJvbSAnLi4vcHJlZmVyZW5jZXMnO1xuaW1wb3J0IHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBsYXlvdXRzIH0gZnJvbSAnLi9MYXlvdXRDb250ZXh0JztcbmltcG9ydCB7XG4gICAgZm9udFNjYWxlRmFjdG9yVG9TaXplLFxuICAgIGZvbnRTaXplVG9TY2FsZUZhY3RvcixcbiAgICBmb250U2l6ZVZhbHMsXG59IGZyb20gJy4uL3JlbmRlclV0aWxzJztcblxuY29uc3QgU0VMRUNUX1dJRFRIID0gMTIwO1xuXG5jb25zdCB0aGVtZVNlbGVjdFN0eWxlID0gY3NzKHtcbiAgICB3aWR0aDogU0VMRUNUX1dJRFRILFxuICAgIG1hcmdpbkxlZnQ6IDUsXG59KTtcblxuY29uc3QgZm9udFNpemVTZWxlY3RTdHlsZSA9IGNzcyh7XG4gICAgd2lkdGg6IFNFTEVDVF9XSURUSCxcbiAgICBtYXJnaW5MZWZ0OiA1LFxufSk7XG5cbmNvbnN0IHNlbGVjdExhYmVsU3R5bGUgPSBjc3Moe1xuICAgIG1hcmdpblRvcDogMCxcbiAgICBtYXJnaW5Cb3R0b206IDAsXG4gICAgbWFyZ2luTGVmdDogMCxcbiAgICBtYXJnaW5SaWdodDogNCxcbn0pO1xuXG5jb25zdCBjaGVja0xhYmVsU3R5bGUgPSBjc3Moe1xuICAgIG1hcmdpblRvcDogMCxcbiAgICBtYXJnaW5Cb3R0b206IDAsXG4gICAgbWFyZ2luTGVmdDogMCxcbiAgICBtYXJnaW5SaWdodDogMCxcbn0pO1xuXG5jb25zdCBwcmVmc0NoZWNrYm94ID0gY3NzKHtcbiAgICBtYXJnaW5MZWZ0OiA4LFxuICAgIG1hcmdpblJpZ2h0OiA0LFxuICAgIG1hcmdpblRvcDogJ2F1dG8nLFxuICAgIG1hcmdpbkJvdHRvbTogJ2F1dG8nLFxufSk7XG5cbmNvbnN0IHByZWZzTGFiZWxlZENoZWNrYm94ID0gY3NzKHtcbiAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgYWxpZ25Db250ZW50OiAnZmxleC1zdGFydCcsXG59KTtcblxuaW50ZXJmYWNlIFByZWZlcmVuY2VzTW9kYWxQcm9wcyB7XG4gICAgaW5pdGlhbFByZWZzOiBQcmVmZXJlbmNlcztcbiAgICBvbkNsb3NlOiAoKSA9PiB2b2lkO1xuICAgIG9uQXBwbHk6IChuZXdQcmVmczogUHJlZmVyZW5jZXMpID0+IHZvaWQ7XG4gICAgb25TdWJtaXQ6IChuZXdQcmVmczogUHJlZmVyZW5jZXMpID0+IHZvaWQ7XG59XG5cbmNvbnN0IFByZWZlcmVuY2VzTW9kYWw6IFJlYWN0LkZDPFByZWZlcmVuY2VzTW9kYWxQcm9wcz4gPSAoe1xuICAgIGluaXRpYWxQcmVmcyxcbiAgICBvbkNsb3NlLFxuICAgIG9uQXBwbHksXG4gICAgb25TdWJtaXQsXG59KSA9PiB7XG4gICAgbG9nLmRlYnVnKCdQcmVmZXJlbmNlc01vZGFsOiBpbml0aWFsUHJlZnM6ICcsIGluaXRpYWxQcmVmcy50b0pTKCkpO1xuICAgIGNvbnN0IFtwcmVmcywgc2V0UHJlZnNdID0gdXNlU3RhdGUoaW5pdGlhbFByZWZzKTtcblxuICAgIGNvbnN0IGhhbmRsZUtleURvd24gPSAoZTogUmVhY3QuS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgICAgICBpZiAoZS5rZXlDb2RlID09PSBDb25zdGFudHMuS0VZX0VTQykge1xuICAgICAgICAgICAgLy8gRVNDIGtleVxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgb25DbG9zZSgpO1xuICAgICAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PT0gQ29uc3RhbnRzLktFWV9FTlRFUikge1xuICAgICAgICAgICAgaGFuZGxlU3VibWl0KGUpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGhhbmRsZUNhbmNlbCA9IChlOiBSZWFjdC5TeW50aGV0aWNFdmVudCkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIC8vIHB1dCBiYWNrIGluaXRpYWwgcHJlZnM6XG4gICAgICAgIG9uQXBwbHkoaW5pdGlhbFByZWZzKTtcbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlQXBwbHkgPSAoZTogUmVhY3QuU3ludGhldGljRXZlbnQpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBvbkFwcGx5KHByZWZzKTtcbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlU3VibWl0ID0gKGU6IFJlYWN0LlN5bnRoZXRpY0V2ZW50KSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgb25TdWJtaXQocHJlZnMpO1xuICAgIH07XG5cbiAgICBjb25zdCBoYW5kbGVQb3BTdGFydENoYW5nZSA9IChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xuICAgICAgICBjb25zdCBvbGRQcmVmcyA9IHByZWZzO1xuICAgICAgICBjb25zdCBuZXh0UHJlZnMgPSBvbGRQcmVmcy5zZXQoXG4gICAgICAgICAgICAncG9wb3V0T25TdGFydCcsXG4gICAgICAgICAgICAhb2xkUHJlZnMucG9wb3V0T25TdGFydFxuICAgICAgICApO1xuICAgICAgICBzZXRQcmVmcyhuZXh0UHJlZnMpO1xuICAgIH07XG5cbiAgICBjb25zdCBoYW5kbGVUYWJEZWR1cGVDaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG9sZFByZWZzID0gcHJlZnM7XG4gICAgICAgIGNvbnN0IG5leHRQcmVmcyA9IG9sZFByZWZzLnNldCgnZGVkdXBlVGFicycsICFvbGRQcmVmcy5kZWR1cGVUYWJzKTtcbiAgICAgICAgc2V0UHJlZnMobmV4dFByZWZzKTtcbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlUmV2ZXJ0T25PcGVuQ2hhbmdlID0gKFxuICAgICAgICBlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PlxuICAgICkgPT4ge1xuICAgICAgICBjb25zdCBvbGRQcmVmcyA9IHByZWZzO1xuICAgICAgICBjb25zdCBuZXh0UHJlZnMgPSBvbGRQcmVmcy5zZXQoJ3JldmVydE9uT3BlbicsICFvbGRQcmVmcy5yZXZlcnRPbk9wZW4pO1xuICAgICAgICBzZXRQcmVmcyhuZXh0UHJlZnMpO1xuICAgIH07XG5cbiAgICBjb25zdCBoYW5kbGVUaGVtZUNoYW5nZSA9IChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MU2VsZWN0RWxlbWVudD4pID0+IHtcbiAgICAgICAgY29uc3Qgb2xkUHJlZnMgPSBwcmVmcztcbiAgICAgICAgY29uc3QgbmV4dFByZWZzID0gb2xkUHJlZnMuc2V0KCd0aGVtZScsIGUudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgbG9nLmRlYnVnKCdoYW5kbGVUaGVtZUNoYW5nZTogbmV4dFByZWZzOicsIG5leHRQcmVmcy50b0pTKCkpO1xuICAgICAgICBzZXRQcmVmcyhuZXh0UHJlZnMpO1xuICAgIH07XG5cbiAgICBjb25zdCBoYW5kbGVMYXlvdXRDaGFuZ2UgPSAoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTFNlbGVjdEVsZW1lbnQ+KSA9PiB7XG4gICAgICAgIGNvbnN0IG9sZFByZWZzID0gcHJlZnM7XG4gICAgICAgIGNvbnN0IG5leHRQcmVmcyA9IG9sZFByZWZzLnNldCgnbGF5b3V0JywgZS50YXJnZXQudmFsdWUpO1xuICAgICAgICBsb2cuZGVidWcoJ2hhbmRsZVRoZW1lQ2hhbmdlOiBuZXh0UHJlZnM6JywgbmV4dFByZWZzLnRvSlMoKSk7XG4gICAgICAgIHNldFByZWZzKG5leHRQcmVmcyk7XG4gICAgfTtcblxuICAgIGNvbnN0IGhhbmRsZUZvbnRTaXplQ2hhbmdlID0gKGU6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxTZWxlY3RFbGVtZW50PikgPT4ge1xuICAgICAgICBjb25zdCBvbGRQcmVmcyA9IHByZWZzO1xuICAgICAgICBjb25zdCBuZXh0U2NhbGVGYWN0b3IgPSBmb250U2l6ZVRvU2NhbGVGYWN0b3IoXG4gICAgICAgICAgICBOdW1iZXIucGFyc2VJbnQoZS50YXJnZXQudmFsdWUpXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IG5leHRQcmVmcyA9IG9sZFByZWZzLnNldCgnZm9udFNjYWxlRmFjdG9yJywgbmV4dFNjYWxlRmFjdG9yKTtcbiAgICAgICAgbG9nLmRlYnVnKFxuICAgICAgICAgICAgJ2hhbmRsZUZvbnRTaXplQ2hhbmdlOiBmb250U2l6ZTogJyxcbiAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgJywgbmV4dFByZWZzOicsXG4gICAgICAgICAgICBuZXh0UHJlZnMudG9KUygpXG4gICAgICAgICk7XG4gICAgICAgIHNldFByZWZzKG5leHRQcmVmcyk7XG4gICAgfTtcblxuICAgIGNvbnN0IHBvcFN0YXJ0ID0gcHJlZnMucG9wb3V0T25TdGFydDtcbiAgICBjb25zdCBkZWR1cGVUYWJzID0gcHJlZnMuZGVkdXBlVGFicztcbiAgICBjb25zdCByZXZlcnRPbk9wZW4gPSBwcmVmcy5yZXZlcnRPbk9wZW47XG5cbiAgICBjb25zdCBjdXJyZW50VGhlbWUgPSBwcmVmcy50aGVtZTtcbiAgICBjb25zdCB0aGVtZU5hbWVzID0gT2JqZWN0LmtleXModGhlbWVzKTtcbiAgICBjb25zdCB0aGVtZU9wdHMgPSB0aGVtZU5hbWVzLm1hcCgobm0pID0+IChcbiAgICAgICAgPG9wdGlvbiBrZXk9e25tfSB2YWx1ZT17bm19PlxuICAgICAgICAgICAge25tfVxuICAgICAgICA8L29wdGlvbj5cbiAgICApKTtcbiAgICBjb25zdCB0aGVtZVNlbGVjdCA9IChcbiAgICAgICAgPHNlbGVjdFxuICAgICAgICAgICAgY2xhc3NOYW1lPXt0aGVtZVNlbGVjdFN0eWxlfVxuICAgICAgICAgICAgbmFtZT1cInRoZW1lXCJcbiAgICAgICAgICAgIHZhbHVlPXtjdXJyZW50VGhlbWV9XG4gICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IGhhbmRsZVRoZW1lQ2hhbmdlKGUpfVxuICAgICAgICA+XG4gICAgICAgICAgICB7dGhlbWVPcHRzfVxuICAgICAgICA8L3NlbGVjdD5cbiAgICApO1xuXG4gICAgY29uc3QgY3VycmVudExheW91dCA9IHByZWZzLmxheW91dDtcbiAgICBjb25zdCBsYXlvdXROYW1lcyA9IE9iamVjdC5rZXlzKGxheW91dHMpO1xuICAgIGNvbnN0IGxheW91dE9wdHMgPSBsYXlvdXROYW1lcy5tYXAoKG5tKSA9PiAoXG4gICAgICAgIDxvcHRpb24ga2V5PXtubX0gdmFsdWU9e25tfT5cbiAgICAgICAgICAgIHtubX1cbiAgICAgICAgPC9vcHRpb24+XG4gICAgKSk7XG4gICAgY29uc3QgbGF5b3V0U2VsZWN0ID0gKFxuICAgICAgICA8c2VsZWN0XG4gICAgICAgICAgICBjbGFzc05hbWU9e3RoZW1lU2VsZWN0U3R5bGV9XG4gICAgICAgICAgICBuYW1lPVwibGF5b3V0XCJcbiAgICAgICAgICAgIHZhbHVlPXtjdXJyZW50TGF5b3V0fVxuICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBoYW5kbGVMYXlvdXRDaGFuZ2UoZSl9XG4gICAgICAgID5cbiAgICAgICAgICAgIHtsYXlvdXRPcHRzfVxuICAgICAgICA8L3NlbGVjdD5cbiAgICApO1xuXG4gICAgY29uc3QgY3VycmVudEZvbnRTaXplID0gZm9udFNjYWxlRmFjdG9yVG9TaXplKHByZWZzLmZvbnRTY2FsZUZhY3Rvcik7XG4gICAgY29uc3QgZm9udFNpemVPcHRzID0gZm9udFNpemVWYWxzLm1hcCgoc3opID0+IChcbiAgICAgICAgPG9wdGlvbiBrZXk9e3N6LnRvU3RyaW5nKCl9IHZhbHVlPXtzen0+XG4gICAgICAgICAgICB7c3oudG9TdHJpbmcoKX1cbiAgICAgICAgPC9vcHRpb24+XG4gICAgKSk7XG4gICAgY29uc3QgZm9udFNpemVTZWxlY3QgPSAoXG4gICAgICAgIDxzZWxlY3RcbiAgICAgICAgICAgIGNsYXNzTmFtZT17Zm9udFNpemVTZWxlY3RTdHlsZX1cbiAgICAgICAgICAgIG5hbWU9XCJmb250U2l6ZVwiXG4gICAgICAgICAgICB2YWx1ZT17Y3VycmVudEZvbnRTaXplfVxuICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBoYW5kbGVGb250U2l6ZUNoYW5nZShlKX1cbiAgICAgICAgPlxuICAgICAgICAgICAge2ZvbnRTaXplT3B0c31cbiAgICAgICAgPC9zZWxlY3Q+XG4gICAgKTtcblxuICAgIGNvbnN0IHJpZ2h0Q29sID0gc3R5bGVzLnByZWZzR3JpZFJpZ2h0Q29sO1xuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPE1vZGFsLkRpYWxvZ1xuICAgICAgICAgICAgY2xhc3NOYW1lPXtzdHlsZXMucHJlZnNEaWFsb2d9XG4gICAgICAgICAgICB0aXRsZT1cIlRhYmxpIFByZWZlcmVuY2VzXCJcbiAgICAgICAgICAgIG9uQ2xvc2U9e29uQ2xvc2V9XG4gICAgICAgID5cbiAgICAgICAgICAgIDxNb2RhbC5Cb2R5PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMubW9kYWxCb2R5Q29udGFpbmVyfT5cbiAgICAgICAgICAgICAgICAgICAgPGZvcm0gY2xhc3NOYW1lPXtzdHlsZXMucHJlZnNGb3JtfSBvblN1Ym1pdD17aGFuZGxlU3VibWl0fT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMucHJlZnNHcmlkQ29udGFpbmVyfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY2hlY2tib3gnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHRDb2wsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVmc0xhYmVsZWRDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtwcmVmc0NoZWNrYm94fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17cG9wU3RhcnR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IGhhbmRsZVBvcFN0YXJ0Q2hhbmdlKGUpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPXtjaGVja0xhYmVsU3R5bGV9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2hvdyBUYWJsaSBwb3BvdXQgd2luZG93IGF0IHN0YXJ0dXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY2hlY2tib3gnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHRDb2wsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVmc0xhYmVsZWRDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtwcmVmc0NoZWNrYm94fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17ZGVkdXBlVGFic31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gaGFuZGxlVGFiRGVkdXBlQ2hhbmdlKCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9e2NoZWNrTGFiZWxTdHlsZX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvbWF0aWNhbGx5IGNsb3NlIGR1cGxpY2F0ZSB0YWJzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NoZWNrYm94JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0Q29sLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlZnNMYWJlbGVkQ2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17cHJlZnNDaGVja2JveH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e3JldmVydE9uT3Blbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVSZXZlcnRPbk9wZW5DaGFuZ2UoZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT17Y2hlY2tMYWJlbFN0eWxlfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9ubHkgcmUtb3BlbiBzYXZlZCB0YWJzIHdoZW4gcmUtb3BlbmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZWQgd2luZG93c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5wcmVmc0dyaWRMYWJlbH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9e3NlbGVjdExhYmVsU3R5bGV9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGhlbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhlbWVTZWxlY3R9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5wcmVmc0dyaWRMYWJlbH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9e3NlbGVjdExhYmVsU3R5bGV9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTGF5b3V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xheW91dFNlbGVjdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLnByZWZzR3JpZExhYmVsfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT17c2VsZWN0TGFiZWxTdHlsZX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGb250IFNpemVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Zm9udFNpemVTZWxlY3R9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9mb3JtPlxuICAgICAgICAgICAgICAgICAgICA8aHIgLz5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5kaWFsb2dCdXR0b25Sb3d9PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ0biBidG4tZGVmYXVsdCBidG4tbGlnaHQgdGFibGktZGlhbG9nLWJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlQ2FuY2VsKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17MH1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDYW5jZWxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnRuIGJ0bi1pbmZvIHRhYmxpLWRpYWxvZy1idXR0b25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiBoYW5kbGVBcHBseShlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17MH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbktleURvd249e2hhbmRsZUtleURvd259XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQXBwbHlcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ0biBidG4tcHJpbWFyeSBidG4tZGVmYXVsdCB0YWJsaS1kaWFsb2ctYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4gaGFuZGxlU3VibWl0KGUpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXswfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uS2V5RG93bj17aGFuZGxlS2V5RG93bn1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPS1xuICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9Nb2RhbC5Cb2R5PlxuICAgICAgICA8L01vZGFsLkRpYWxvZz5cbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgUHJlZmVyZW5jZXNNb2RhbDtcbiIsImltcG9ydCBsb2cgZnJvbSAnbG9nbGV2ZWwnO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0ICogYXMgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCBQcmVmZXJlbmNlc01vZGFsIGZyb20gJy4vY29tcG9uZW50cy9QcmVmZXJlbmNlc01vZGFsJztcblxuaW1wb3J0ICogYXMgYWN0aW9ucyBmcm9tICcuL2FjdGlvbnMnO1xuXG5pbXBvcnQgQ2hyb21lUHJvbWlzZSBmcm9tICdjaHJvbWUtcHJvbWlzZSc7XG5pbXBvcnQgeyBTdGF0ZVJlZiwgbXV0YWJsZUdldCB9IGZyb20gJ29uZXJlZic7XG5pbXBvcnQgVGFiTWFuYWdlclN0YXRlIGZyb20gJy4vdGFiTWFuYWdlclN0YXRlJztcbmltcG9ydCB7IFByZWZlcmVuY2VzIH0gZnJvbSAnLi9wcmVmZXJlbmNlcyc7XG5jb25zdCBjaHJvbWVwID0gQ2hyb21lUHJvbWlzZTtcblxuY29uc3Qgb25DbG9zZSA9IGFzeW5jICgpID0+IHtcbiAgICBsb2cuZGVidWcoJ29uQ2xvc2UnKTtcbiAgICBjb25zdCB0YWIgPSBhd2FpdCBjaHJvbWVwLnRhYnMuZ2V0Q3VycmVudCgpO1xuICAgIGxvZy5kZWJ1Zygnb25DbG9zZSB0YWI6ICcsIHRhYik7XG4gICAgaWYgKHRhYi5pZCkge1xuICAgICAgICBjaHJvbWUudGFicy5yZW1vdmUoW3RhYi5pZF0pO1xuICAgIH1cbn07XG5cbmNvbnN0IG9uQXBwbHlQcmVmZXJlbmNlcyA9IGFzeW5jIChcbiAgICBzdGF0ZVJlZjogU3RhdGVSZWY8VGFiTWFuYWdlclN0YXRlPixcbiAgICBuZXdQcmVmczogUHJlZmVyZW5jZXNcbikgPT4ge1xuICAgIGF3YWl0IGFjdGlvbnMuc2F2ZVByZWZlcmVuY2VzKG5ld1ByZWZzLCBzdGF0ZVJlZik7XG59O1xuXG5jb25zdCBvblVwZGF0ZVByZWZlcmVuY2VzID0gYXN5bmMgKFxuICAgIHN0YXRlUmVmOiBTdGF0ZVJlZjxUYWJNYW5hZ2VyU3RhdGU+LFxuICAgIG5ld1ByZWZzOiBQcmVmZXJlbmNlc1xuKSA9PiB7XG4gICAgYXdhaXQgb25BcHBseVByZWZlcmVuY2VzKHN0YXRlUmVmLCBuZXdQcmVmcyk7XG4gICAgYXdhaXQgb25DbG9zZSgpO1xufTtcblxuY29uc3QgcmVuZGVyUHJlZnMgPSBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgYmdQYWdlID0gY2hyb21lLmV4dGVuc2lvbi5nZXRCYWNrZ3JvdW5kUGFnZSgpO1xuICAgICAgICBjb25zdCBzdGF0ZVJlZiA9IChiZ1BhZ2UgYXMgYW55KS5zdGF0ZVJlZiBhcyBTdGF0ZVJlZjxUYWJNYW5hZ2VyU3RhdGU+O1xuICAgICAgICBjb25zdCBzdCA9IG11dGFibGVHZXQoc3RhdGVSZWYpO1xuICAgICAgICBjb25zdCBwYXJlbnROb2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByZWZzQ29udGVudCcpO1xuICAgICAgICBjb25zdCBtb2RhbCA9IChcbiAgICAgICAgICAgIDxQcmVmZXJlbmNlc01vZGFsXG4gICAgICAgICAgICAgICAgb25DbG9zZT17b25DbG9zZX1cbiAgICAgICAgICAgICAgICBpbml0aWFsUHJlZnM9e3N0LnByZWZlcmVuY2VzfVxuICAgICAgICAgICAgICAgIG9uQXBwbHk9e3ByZWZzID0+IG9uQXBwbHlQcmVmZXJlbmNlcyhzdGF0ZVJlZiwgcHJlZnMpfVxuICAgICAgICAgICAgICAgIG9uU3VibWl0PXtwcmVmcyA9PiBvblVwZGF0ZVByZWZlcmVuY2VzKHN0YXRlUmVmLCBwcmVmcyl9XG4gICAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgICAgICBSZWFjdERPTS5yZW5kZXIobW9kYWwsIHBhcmVudE5vZGUpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgbG9nLmVycm9yKCdjYXVnaHQgZXhjZXB0aW9uIHJlbmRlcmluZyBwcmVmZXJlbmNlcyBwYWdlOicpO1xuICAgICAgICBsb2cuZXJyb3IoZS5zdGFjayk7XG4gICAgICAgIHRocm93IGU7XG4gICAgfVxufTtcblxuZnVuY3Rpb24gbWFpbigpIHtcbiAgICB3aW5kb3cub25sb2FkID0gKCkgPT4gcmVuZGVyUHJlZnMoKTtcbn1cblxubWFpbigpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==